<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
            <HTML>
            <HEAD>
                <TITLE>The ICI HTML module</TITLE>
                <STYLE TYPE="text/css">
                    BODY {color: black}
                    P {font-size: 12pt; width: 450pt}
                    H1 {font-size: 12pt; font-family: Arial;
                        font-weight: bold}
                    H2 {font-size: 10pt; font-family: Arial;
                        font-style: italic; font-weight: bold}
                    PRE {background: aliceblue}
                    DT {font-style: Italic}
                    DD.DefnIn4cm {width: 337pt; margin-left: 113pt}   
                    DD.DefnIn2cm {width: 396pt; margin-left: 56pt}
                </STYLE>
                <META NAME="Generator" CONTENT="extract-doc-from-src.ici">
                <META NAME="Keywords" CONTENT="ICI">
                <META NAME="Description" CONTENT="ICI extension module documentation">
            </HEAD>
            <BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#FF0000" VLINK="#800000" ALINK="#FF00FF" BACKGROUND="?">
            <H1>The ICI HTML module</H1>
<H1>Details</H1>
<H2>HTML.Address  --  wrapper element that displays its body as an address</H2>
<H2>element = HTML.Address:new([string])</H2>
<P ALIGN="left">Create a new Address element with the given body text.</P>
<H2>HTML.Big  --  wrapper element that displays its body text in a larger font</H2>
<H2>HTML.Blockquote  --  wrapper element that displays its body as a quote</H2>
<H2>element = HTML.Blockquote:new([string])</H2>
<P ALIGN="left">Create a new Blockquote element with the given body
text.</P>
<H2>HTML.Bold  --  embolden child element text</H2>
<PRE></PRE>
<H2>element = HTML.Bold:new([string])</H2>
<P ALIGN="left">Create a new Bold element with the given body text.</P>
<H2>HTML.Cite  --  wrapper element that displays its body text as a citation</H2>
<H2>HTML.Code  --  wrapper element that displays its body text as program code</H2>
<H2>HTML.Element - base class of HTML elements</H2>
<P ALIGN="left">An element is the base unit in the document hierarchy.
An element has a &quot;tag&quot;, some attributes (key/value
pairs), some body text and a sequence of child elements.
The basic operations on elements are setting its body
text, adding child elements, setting attributes and
finally generating an HTML representation of an element.</P>
<P ALIGN="left">The element output operation is implemented in stages.
Each stage is implemented in a separate method allowing
derived classes to specialise the behaviour. Output
is separated into &quot;head&quot;, &quot;body&quot;
and &quot;tail&quot; sections. Output of element attributes
is also separated out allowing separate control over
attribute output if required.</P>
<P ALIGN="left">The interface to element output is a single method,
&quot;output(file)&quot;, that outputs HTML for the
element instance to the given file. This interface
can be considered a &quot;protocol&quot;. Any class
that implements an &quot;output(file)&quot; method
may be used as a child element within an HTML.Element
instance. Presumably the class performs some special
action, e.g, a database lookup, and returns appropriate
HTML objects to present the object within the HTML
page.</P>
<P ALIGN="left">Adding child elements is performed by the &quot;add()&quot;
method. &quot;add()&quot; appends the elements given
as its arguments to the child elements of the instance.
The &quot;add()&quot; method also allows strings, arrays
and functions to be passed as children to be added
to the array. If an array is given its elements are
passed to &quot;add()&quot; to be added individually.
The elements may be object instances, arrays or functions
as per the arguments to &quot;add()&quot;. If a function
is passed it is called and its result passed in a recursive
call to &quot;add()&quot; on the instance. The function
may return an object instance, array or function as
per the arguments to &quot;add()&quot;.</P>
<P ALIGN="left">The above calling semantics give great flexibliity
in adding objects. A single invoccation of &quot;add()&quot;
is often sufficent to generate a complete page or complex
document structure and the use of embedded functions
simplifies the dynamic generation of content.</P>
<H2>element = HTML.Element:new(tag, text)</H2>
<P ALIGN="left">Create a new instance of an element. The arguments
are the element's tag and optional body text, both
strings. The new element is created with the given
tag and body text and no attributes or children.</P>
<H2>HTML.Em  --  wrapper element that displays its body in a emphasised style</H2>
<H2>element = HTML.Em:new([string])</H2>
<P ALIGN="left">Create a new Em element with the given body text.</P>
<H2>HTML.Font  --  control font presentation</H2>
<P ALIGN="left">An HTML.Font element allows control over the font used
by any child elements. It is a wrapper element to control
the presentation of its children.</P>
<H2>element = HTML.Font:new([string])</H2>
<P ALIGN="left">Create a new Font element with the given body text.</P>
<H2>HTML.Italic  --  italicise child element text</H2>
<H2>element = HTML.Italic:new([string])</H2>
<P ALIGN="left">Create a new Italic element with the given body text.</P>
<H2>HTML.Kbd  --  wrapper element that displays its body text as keyboard entered text</H2>
<H2>HTML.Markup  --  class to represent arbtirary content</H2>
<P ALIGN="left">The HTML.Markup class provides an escape mecahanism
within the structure of HTML.Element based classes.
An HTML.Markup instance stores arbitrary text which
is output direct to the output stream. The intent is
to allow any HTML content to be used with this class
hierarchy.</P>
<H2>element = HTML.Markup:new(string)</H2>
<P ALIGN="left">Create a new element holding the given content data
given as argument. The data is output verbatim during
output. Markup elements allow arbitrary data to be
embedded within a document.</P>
<H2>HTML.NoEndTagElement  --  internal base-class for elements with no end tag</H2>
<P ALIGN="left">This is a specialisation of HTML.Element that removes
overrides output_tail() so no end tag is generated
for type of this element. All other behaviour is the
same as HTML.Element.</P>
<H2>HTML.P  --  HTML paragraph element</H2>
<P ALIGN="left">An HTML.P instance represents a paragraph. It is a
special case of element in that it has no start tag
and the end of a paragraph is marked by a sole &quot;&lt;P&gt;&quot;
element. The class overrides the &quot;output_head()&quot;
method to remove any start tag and implements &quot;output_tail()&quot;
to generate the &quot;&lt;p&gt;&quot;. Body output
is done by HTML.Element.</P>
<H2>element = HTML.P:new([string])</H2>
<P ALIGN="left">Create a new HTML paragraph element with the given
string as its body. If no argument is passed the body
is the empty string.</P>
<H2>HTML.Page  -  a HTML page</H2>
<H2>page = HTML.Page:new([string [, bool]])</H2>
<P ALIGN="left">Create a new HTML.Page instance with the given title
string, if any. If the second parameter is passed it
can be used to disable the default behaviour that assumes
we are running as a CGI program under some HTTP server.
If the flag is passed as false no CGI output is generated.</P>
<H2>HTML.Small  --  wrapper element that displays its body text in a smaller font</H2>
<H2>HTML.Strike  --  wrapper element that displays its body text in a strikeout font</H2>
<H2>HTML.Strong  --  wrapper element that displays its body text in a strong style</H2>
<H2>HTML.Style  --  page header style element</H2>
<H2>HTML.Typewriter  --  wrapper element that displays its body text in a fixed width font</H2>
<H2>HTML.Underline  -- wrapper element that displsus its body text with an underline</H2>
<H2>element = element:add(...)</H2>
<P ALIGN="left">Add child elements to an element. See the comment at
the head of this class for a description of the arguments
and semantics of this method.</P>
<P ALIGN="left">Returns the element instance for method chaining.</P>
<H2>element = element:add_text(string)</H2>
<P ALIGN="left">Append the given string to the element's body text.</P>
<H2>element = element:attr(name, value)</H2>
<P ALIGN="left">Set the named attribute of the element to the given
value. Both name and value are strings. If the attribute
exists it is overwritten, if it does not exist it is
created. Returns the element instance for method chaining.</P>
<H2>array = element:children()</H2>
<P ALIGN="left">Return the array storing the element's children.</P>
<H2>element = element:color(string)</H2>
<P ALIGN="left">Set the color used when drawing characters with a font
element.</P>
<H2>element = element:face(string)</H2>
<P ALIGN="left">Set the typeface used with a Font element. Returns
the element instance to allow for method chaining.</P>
<H2>string|NULL = element:get_attr(string)</H2>
<P ALIGN="left">Return the value of the named attribute. Returns NULL
if there is no such attribute for this element.</P>
<H2>string = element:get_text()</H2>
<P ALIGN="left">Return the element's body text. If the element has
no body text an empty string is returned.</P>
<H2>element = element:id(str)</H2>
<P ALIGN="left">Define the id of an element.</P>
<H2>element = element:klass(str)</H2>
<P ALIGN="left">Define the class of an element.</P>
<H2>element = element:output([file])</H2>
<P ALIGN="left">Output an element to the given file or stdout if no
file is passed. This method outputs an HTML representation
of the element instance to the given stream. Output
is performed in three method calls - &quot;output_head()&quot;
to output the start of the element. Then &quot;output_body()&quot;
to output any body text and child elements and finally
&quot;output_tail()&quot; to generate the end tag for
the element.</P>
<P ALIGN="left">The method returns the instance to allow method chaining.</P>
<H2>element:output_attr(file)</H2>
<P ALIGN="left">Output the element's attributes for use in a HTML tag.</P>
<H2>element:output_body(file)</H2>
<P ALIGN="left">Output the element's body and children to the given
file.</P>
<H2>element:output_head(file)</H2>
<P ALIGN="left">Output the element's start tag and attributes.</P>
<H2>element:output_tail(file)</H2>
<P ALIGN="left">Output the element's end tag.</P>
<H2>element = element:size(int|string)</H2>
<P ALIGN="left">Set the size of the font defined by the font element.
The size may be given as a integer or string. Returns
the element instance to allow for method chaining.</P>
<H2>element = element:style(str)</H2>
<P ALIGN="left">Define a style attribute for an element.</P>
<H2>element = element:text(string)</H2>
<P ALIGN="left">Set the element's body text to the given string. Returns
the instance for method chaining.</P>
<H2>markup:output_body(file)</H2>
<P ALIGN="left">Implement Element:output_body() to output our markup
content. We can't use the Element class implementation
as we define no concept of children (although we inherit
it, the behaviour is nullified by not outputting any
child elements).</P>
<H2>markup:output_head(file)</H2>
<P ALIGN="left">Override Element:output_head() to do nothing.</P>
<H2>p:output_head(file)</H2>
<P ALIGN="left">Override Element:output_head to do nothing.</P>
<H2>p:output_tail(file)</H2>
<P ALIGN="left">Implement Element:output_tail() to output the trailing
paragraph tag.</P>
<H2>page = page:add_cgi_header(name, value)</H2>
<H2>page = page:add_header(element)</H2>
<P ALIGN="left">Add an element to the header section of the page, i.e,
the portion between the &lt;head&gt; and &lt;/head&gt;
tags. This is used to add meta tags and the like.</P>
<H2>page = page:bgcolor(string)</H2>
<P ALIGN="left">Define the page background color.</P>
<H2>page = page:colors(string [, string [, string, [string]]])</H2>
<P ALIGN="left">Define the colors used when rendering the page. The
first argument, the only required argument, defines
the page background color. The second argument is the
default color of text, the third argument the default
color of links and the final argument the default color
of visited links.</P>
<H2>page = page:nocgi([flag])</H2>
<P ALIGN="left">Disable or enable output of CGI headers. They are enabled
by default.</P>
<H2>page:output_head(file)</H2>
<P ALIGN="left">Implement Element:outupt_head() to output the page
header before the &lt;body&gt; tag, which is our element's
tag in the Element instance. This outputs the headers
defined by by user.</P>
<H2>page:output_tail(file)</H2>
<P ALIGN="left">Implement Element:output_tail() to output the real
end of page tag following the &lt;/body&gt; our superclass
outputs.</P>
<H2>string|array = page:param(string)</H2>
<H2>struct = page:params()</H2>
<H2>page = page:style(text)</H2>
<H2>page = page:text_colors(string [, string, [string]])</H2>
<P ALIGN="left">Define the colors used when drawing text on the page.
The first argument is the default color of text, the
second argument the color of text within anchors and
the third argument the color of visited links.</P>
<H2>page = page:title(string)</H2>
<P ALIGN="left">Set the page title.</P>
</BODY>
</HTML>
